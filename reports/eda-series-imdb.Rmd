---
title: "Análise de Séries a partir de Dados do IMDB"
author: "Maria Clara Moraes"
date: "03/05/2018"
output:
  html_document:
    df_print: paged
    toc: yes
    toc_float: yes
  html_notebook:
    toc: yes
    toc_float: yes
---

```{r setup, echo=FALSE, warning=FALSE, message=FALSE}
library(tidyverse)
library(here)
library(plotly)
theme_set(theme_bw())
```

```{r echo=FALSE}
series = read_csv("/home/maria/Documentos/Estudo/cdd/cdd-lab1-clarammdantas/data/series_from_imdb.csv")
```

### A quantidade de temporadas é inversamente proporcional à nota da série?

Antes de responder a esta pergunta podemos tentar ter um panorama geral do comportamento das notas atribuídas a cada temporada de uma série. Nos gráficos abaixo podemos ver, por exemplo, que os produtores de American Idol foram bastante persistentes uma vez que desde a primeira teporada o show não foi bem recebido pelo público. Depois de muitos altos e baixos, na 12ª temporada quando a nota foi a segunda pior da sua história, as temporadas seguintes vêm mostrando um crescimento bastante alto atingindo a nota máxima, 6.72 na 15ª temporada.

Porém também podemos observar casos em que aparentemente os produtores não souberam quando parar. Os Simpsons ilustram bem essa situação. A série passa bastante tempo bem sucedida mas a partir mais ou menos da 11ª temporada, sua nota começa a cair bastante chegando a 6.67 na 28ª temporada.

Outro fato interessante é que quando começam, as séries ficam num limbo entre aproximadamente 6.8 e 9.2 e aparentemente há um processo de funilamento até a 8ª temporada. Outra coisa que chama atenção é um conjunto de séries que aparecem com um traço sempre crescente até mais ou menos a 4ª temporada.

```{r}
series_by_season = series %>% 
  group_by(series_name, season) %>% 
  summarise(mean_user_rating = mean(user_rating))

series_by_season %>% 
  ggplot(aes(x = season, y = mean_user_rating, group = series_name)) + 
  geom_line(size = 0.1, alpha = 0.5)
```

```{r message=FALSE}
means_by_season = plot_ly(series_by_season,
                         x = ~season,
                         y = ~mean_user_rating,
                         color = ~series_name,
                         type = "scatter",
                         mode = "lines") %>% 
  layout(showlegend = FALSE)

means_by_season

#usually, how many seasons has successful serie?
```

Mas para de fato responder a esta pergunta, devemos checar se existe uma correlação linear entre a quantidade de temporadas e a nota "absoluta" de uma série. Sendo a nota "absoluta" a média de todas as avaliações dadas àquela série. Claro que fazendo isso não estamos definindo uma fórmula para uma série de sucesso, pois obviamente outros fatores influenciam a qualidade de uma série como enredo e elenco por exemplo. Só queremos aqui saber se

###Which serie kept well avaliated for the longest period of time?
###A quantidade de temporadas de uma série é inversamente proporcional a sua nota?
###Qual série se manteve mais bem avaliada pelo maior período de tempo?
